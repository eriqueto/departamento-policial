<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Encerrar Caso | Departamento Policial</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        /* Estilos de Formul√°rio (copiados do register_pessoa.html) */
        .form-section {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .form-section h3 {
            margin-top: 0;
            color: #004d99;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .submit-button {
            background-color: #d9534f; /* Vermelho para A√ß√£o Cr√≠tica/Final */
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        .submit-button:hover {
            background-color: #c9302c;
        }
        .message-success {
            color: green;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .message-error {
            color: red;
            font-weight: bold;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>üõë Encerrar Caso (Stored Procedure)</h1>
    </header>

    <nav class="navbar">
        <a th:href="@{/}">In√≠cio</a>
        <a th:href="@{/view/casos}">Ver Casos</a>
        <a th:href="@{/procedure/encerrar-caso}">Encerrar Caso</a>
    </nav>

    <p th:if="${statusMessage}" th:text="${statusMessage}"
       th:classappend="${statusMessage.startsWith('‚úÖ') ? 'message-success' : 'message-error'}"></p>

    <form th:action="@{/procedure/encerrar-caso}" method="post">

        <div class="form-section">
            <h3>Detalhes do Encerramento</h3>

            <div class="form-group">
                <label for="idCaso">ID do Caso a ser Encerrado</label>
                <input type="number" id="idCaso" name="idCaso" required min="1" placeholder="Ex: 45">
            </div>

            <div class="form-group">
                <label for="conteudoRelatorio">Conte√∫do do Relat√≥rio Final (Obrigat√≥rio)</label>
                <textarea id="conteudoRelatorio" name="conteudoRelatorio" rows="8" required
                          placeholder="Ex: Todas as linhas de investiga√ß√£o foram esgotadas. O caso foi resolvido/arquivado e ser√° oficialmente encerrado."></textarea>
            </div>
        </div>

        <button type="submit" class="submit-button">ENCERRAR CASO E GERAR RELAT√ìRIO</button>
    </form>

    <a th:href="@{/}" class="back-link">Voltar para o In√≠cio</a>
</div>
</body>
</html>